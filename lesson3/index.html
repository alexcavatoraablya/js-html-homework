<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get reguest</title>
    <!-- підключення до bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">

</head>

<body>
    <!-- створення класу з данними користувача -->
    <h1>привіт js</h1>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">Phone</th>
                <th scope="col">Password</th>
                <th scope="col">Image</th>
                <th scope="col">Email</th>
            </tr>
        </thead>
        <!-- групує тег юзерів -->
        <tbody id="listUsers">

        </tbody>
    </table>
    <!-- підключення JavaScript-бібліотеки для перевірки запитів -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.11.0/axios.min.js"></script>

    <script>
        //посилає запит
        const requestUsers = async () => {
            try {
                const url = "https://lohika.itstep.click/api/Users/all";
                //зберігає результат що повертає axios
                const response = await axios.get(url)

                //звертаємося до першого юзера
                //const user1 = response.data[0]

                //тест
                // console.log("result server", response);
                // console.log("user1", user1);

                //вивід списку юзерів в консолі
                const users = response.data;
                // console.log("Users", users);
                const n = users.length;

                //звертання до таблиці
                const listUsers = document.getElementById("listUsers");

                //візуалізація кожного юзера
                for (let i = 0; i < n; i++)
                {
                    console.log("user", users[i]);
                    const urlImage = `https://lohika.itstep.click/images/400_${users[i].photo}`;
                    // console.log("images", urlImage);
                    
                    listUsers.innerHTML +=
                    `
            <tr>
                <th scope="row">${users[i].id}</th>
                <td>${users[i].secondName} ${users[i].firstName}</td>
                <td>${listBears[i].phone}</td>
                <td>${listBears[i].password}</td>
                <td>
                    <img src="${urlImage}"
                        width="75"
                        alt="фото користувача">
                <td>${listBears[i].email}</td>
                </td>
                <td></td>
            </tr
                    `;
                }
            }
            //у разі помилки у запиті викликає повідомлення
            catch (problem) {
                console.log("Хюстон у нас проблеми!", problem)
            }
        }
    </script>

    <script>
        //викликаємо функцію, яка посилає запит
        requestUsers();
        //const зберігає змінну данних користувачів (об.єктів)
        //об'єкт — це основний будівельний блок в коді
        const listBears = [
            {
                id: 1,
                name: "Петро Миколайович",
                phone: "0973336789",
                password: "aboba",
                image: "https://images.unsplash.com/photo-1633332755192-727a05c4013d?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8dXNlcnxlbnwwfHwwfHx8MA%3D%3D",
                email: "ww@ll"
            },

            {
                id: 2,
                name: "Махмут",
                phone: "0976783497",
                password: "skebob",
                image: "https://t4.ftcdn.net/jpg/02/66/72/41/360_F_266724172_Iy8gdKgMa7XmrhYYxLCxyhx6J7070Pr8.jpg",
                email: "ww@ww"
            }
        ];
        //об.єкт в консолі
        console.log("List Bears", listBears);
        const n = listBears.length;
        const listUsers = document.getElementById("listUsers")
        //цикл вивід списку користувачів
        // for - масив
        for (let i = 0; i < n; i++) {
            //вміст html
            listUsers.innerHTML +=
                //`` - виражає оператори, присвоює
                `
            <tr>
                <th scope="row">${listBears[i].id}</th>
                <td>${listBears[i].name}</td>
                <td>${listBears[i].phone}</td>
                <td>${listBears[i].password}</td>
                <td>
                    <img src="${listBears[i].image}"
                        width="75"
                        alt="фото користувача">
                <td>${listBears[i].email}</td>
                </td>
            </tr>
                `;
        }
    </script>
</body>

</html>